import { integer, pgTable, varchar, timestamp, text } from "drizzle-orm/pg-core";
import { relations } from "drizzle-orm";

export const students = pgTable("students", {
  expediente: integer().primaryKey(),
  url_image: text(),
  // Default image of steve from minecraft
  // TODO: Change this to a basic LEGO Render
  lego_image: text().default("iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAIAAAAxBA+LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFNpJREFUeNrs2z2TJMlZwPHMrOrpmdm9FXe6CwkJIUEIEVIEwZuFg4FBEBjg4eEQ8AHwCAw+g74AHjh44GATAYQgMCQDHAiEhF7vTtLd7e68dFdlklXVvbsY2Gie/f1udnaE95BZ+a+qns2/8Nk3coqmtZZzrq3NNeV4472cM419vJy3eeOtYP9+mOcUcQVbW3Zm/15rjbd8r65jKSVH3KLbdP37OAz9e4580Jy2a+Atuh6kAafL61zr99D788WE8a7DfJorBV3CLQwt8eA36svvIftXa/gVzMU+BuB1JoQACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAD83YWsCptqHaa7B+7ZX/Ys4FP/abNeXgE7YWfLYx55iLuMzVtgN1+TloAlvOZRmv9W852HjLRDXNfcagl1+fq9V2nOs6bMDq9wFra0OfruQ+af8ebRHreoYOQz9qWg7YirasYVsSkWOeoi8enJYnwhZ0tu0uJur6raFv9fzoG28Zlzu1nHbDEPNObXuMKOliWHfo8i3iSfryXq0Fu1drpz89FDn024sc8nh59Ymi36GNc437QN9bEfoz0FzK3B+a6nbvHW3t1meIdHmxay3g3cz6tJRKSY/G3B8o1iyGe2DanprScHrijTXg1vh+jH50c5j6Uka8X1sedFOaUu1y0EeKvo7DxfpqNLCQZ+j/vhTP52e8MbeX28v3FvMiXOZKJZchL68Q4814Tl8+X4XRngi3DyUCPzC189GSV4EzMabQYmc+5+Cf0a/rt5U+4qTrTPX0FXAt2/lVRcjfJnllqG2bxmxEjv6LQNv6jQn4f63hi6+o06W40xGDf0cIgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQA8ICMrbWcc8jZ+mjTXFtqOe76tfV7Pv8QbPn6zsxl+SnkFq2tjSUdU2m59W0ab8a27Mw29/Xrw23/K9z+7D8c53mqMQ+Z5fDMp9OltYgT5mWuvpRj1ArOc7262L3z5qNSlmMmagtzyS+OnIghLBcXu5AhzOvJUkq7zKmkkB1cd2Vrcx7Ot2oxQ3i1v11DGO8+puW1Ex88v7k9HMcht4D326ktR2iO+UQ4DsMPPnz6hS9+/o9+9zefXF/e3B/KcjUGdNk78co1Ge6gGS73j5dsBKxEb1+pbTrc3Mx1jno/utzEDEPaDtQcM4Qfvve9aTqu7y6CLV3d73bPD4e/+vt/+erX//uN66vl/VostfUO5pu7Y9xXo3k9P9vpx9NP4UbMr44b8b1FDjrd8nzUHyLq8qiU4348cZ41hXx5f96lOacccYuuZ+j2smL7L9winlct6KvRpe7LCrbjPB+n5auUkG+4+x6dQz8RtjJMIZ8Itxe/tc59i9Z5zjE/gdk+WWqxnwiXzwjngM/029PSsj9r7WtYW/8/tHiX4Xa8jEHzkM9/vxR60hRywBcLF3i62Ptzm/OUwHgf9J43Z8gVzK+OllPp9225Rj1C/fMJAF5rQgiAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAKAEAIghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghADwII39Tw43VT5/tZP+Q8z1a+tgLeJ461CtBV25F9OF36Cn0cIN+GJnnlYw4hZdd+brEcL7wyHlaCkch3J73+6P0xLF3L9a/wq5fvm8djnnkNOVkkNO10+Ydag+YOn/o/8V9k5tvQK35Qx59eWzgI8TZRnrONX74/FwnKZaA97N5FRbG9988qSEW8KhlNrSk+urfgm2vnYtt3jPvW3ZqnXdmutpEy8VyxHaL76gIVym68t3nOY6T4FDOFyM61NFuCfC9b++M+daW/8Kt0V7Hvr+7N+vL3dvvfHoyaPLqQZ8rO/5++DZbf6LP/mDIdxF2Lfk3OpYhqv9vj9RLBWM18G6vLa46w/0QR8Ht7oPwz5q5vuz4DRPz54/699LxBCut2rp0+98fFxuTKMt4nqGln4Nfufb/3W4v4u3gm35FZJlwLqeNctDRbgt2m9ihpIfX+57LErIi3BoedheVywRjPheNGD7/q/rMfh4LeiQ7dTC9b1hxLvR5Xxp6ZXfSYh2wGyfEJ5fGUY8cc43Z2MOeqK2l0NGLUbbJnw9PswOK+YhSrBNmuNefiv/fAKA15oQAiCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghAAghADw0Y9jJWksp5zLknEPOl1ur/avmllrIEfsC9rmGsi1lxPFCzvXqFu1TplRrmvPyPdguXRZw+SuVMgzj2M+asCdp7SdN8L06tlXA1ct5no73x7vtPI24PVuv/NW+9CSuZ07AAfshMy/HTY63hG3don3CudZpnoeoJ01OV/v5YlzO0mC3pOsFmPrd6P2zD25unpcSM4R91Xb7qzLu2nIvE226Wmu/j1lCWPqdTLhTpi9em6eLq8vHT94sw7geO/FmbPf383e//YOl9CVmCPtcH7tueSlhCzddKrX2S/BiNw5luQajhvD9j3ZD7qGv4UK4XIT9r8ef+NwbpT/0hrsG1wHbPN/dPJ3u74fdrsXbpP0GbZ6XEO53uyHcvUwZx5sfvf/257/087/+2/vrxy3iU2Ef6Fvf+NFf/ulfHw/z/nIMt0Pb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"),
});

export const studentRelations = relations(students, ({ many }) => ({
  studentsToWorkshops: many(studentsToWorkshops),
}));

export const workshops = pgTable("workshops", {
  id: integer().primaryKey().generatedAlwaysAsIdentity(),
  nombre: varchar({ length: 100 }).notNull(),
  date: timestamp({ mode: "string" }).notNull(),
});

export const workshopRelations = relations(workshops, ({ many }) => ({
  studentsToWorkshops: many(studentsToWorkshops),
}));

export const studentsToWorkshops = pgTable("attendance", {
  studentId: integer().notNull().references(() => students.expediente),
  workshopId: integer().notNull().references(() => workshops.id),
  registerTime: timestamp({ mode: "string", }).notNull().default("now()"),
});

export const studentsToWorkshopsRelations = relations(studentsToWorkshops, ({ one }) => ({
  student: one(students),
  workshop: one(workshops),
}));
